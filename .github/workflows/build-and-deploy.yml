name: Build and deploy
concurrency:
  group: ${{ github.ref_name }}
  cancel-in-progress: true

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  initialise:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: initialise pipeline state
      uses: ./.github/workflows/composite/intialise
      with:
        main_branch_name: main

  # build:
  #   uses: mmcgroup/pipelines/.github/workflows/build.yml@main
  #   with:
  #     verbose: true
  #   secrets:
  #     azureCredentials: ${{ secrets.AZURE_CREDENTIAL_DEV }}
  #     gitCloneToken: ${{ secrets.GIT_CLONE_TOKEN }}
